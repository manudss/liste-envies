<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">
                Liste des envies de {{vm.user.name}}
                <small>{{vm.email}}</small>
            </h1>
        </div>
    </div>
    <div class="row row-fluid">
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4" id="envie{{envie.id}}" ng-repeat="envie in vm.listeEnvies">
            <div class="panel list-group-item"  ng-class="{'panel-success':envie.userTake, 'panel-info':!envie.userTake}">
                <div class="panel-heading">
                    <span class="badge pull-right">{{envie.price}}</span>
                    <h3>{{envie.label}}</h3>
                    <p title="Popularidade Alta"><i class="fa fa-smile-o fa-lg"></i> 
                        <a href="#"><i>{{vm.user.name}}</i></a><i class="fa fa-gift fa-4x pull-right"></i></p>

                </div>
                <div class="panel-body">
                    <p class="text-center">{{envie.comment}}</p>
                    <div>
                        <a ng-href="{{envie.url}}" ng-if="envie.url" target="_blank" class="btn btn-block btn3d" ng-class="{'btn-default':envie.userTake, 'btn-info':!envie.userTake}"><i class="fa fa-external-link"></i><b>   Plus d'informations  </b></a>
                    </div>
                    <!--<p class="text-warning"><b>574</b> subscribers <span title="Rating"><i class="fa fa-star-half-empty fa-lg pull-right"></i><i class="fa fa-star fa-lg pull-right"></i><i class="fa fa-star fa-lg pull-right"></i><i class="fa fa-star fa-lg pull-right"></i><i class="fa fa-star fa-lg pull-right"></i></span></p>-->
                </div>
                <div class="panel-heading">
                    <!--<div class="row">
                        <div class="col-xs-4 col-md-4" title="Receba até 42 de Status">
                            <p class="text-center"><i class="glyphicon glyphicon-stats fa-2x "></i><span class="badge">42</span></p>
                        </div>
                        <div class="col-xs-4 col-md-4" title="Ganhe até 3 Badges">
                            <p class="text-center"><i class="glyphicon glyphicon-fire fa-2x "></i><span style class="badge"></span><span class="badge">3</span></p>
                        </div>
                        <div class="col-xs-4 col-md-4" title="Ganhe Certificado">
                            <p class="text-center"><i class="glyphicon glyphicon-file fa-2x"></i><span class="badge">1</span></p>
                        </div>
                    </div>-->

                    <p></p>



                    <div title="Cadeau">

                        <h6 ng-if="main.user.email != vm.email && envie.userTake">Offert par {{envie.userTakeUser.name || envie.userTake}}
                            <button type="button" class="btn btn-danger" ng-if="envie.userTakeUser.email == main.user.email" ng-click="vm.cancel(envie.id)">Annuler</button>
                        </h6>

                        <button type="button" class="btn btn-success  btn-block btn3d" ng-if="main.user.email != vm.email && !envie.userTake" ng-click="vm.given(envie.id)"><i class="fa fa-gift fa-lg fa-fw"></i><b>   Offrir </b></button>

                    </div>

                    <div class="comments" ng-if="main.user.email != vm.email">
                        <a class="btn btn-link" role="button" aria-expanded="false" aria-controls="collapseExample" ng-click="vm.openComment($index)">
                            Commmentaires ({{envie.notes.length || 0}})
                        </a>
                        <div class="collapse" id="comment-{{$index}}">
                            <div class="panel panel-default" ng-repeat="note in envie.notes">
                                <div class="panel-heading">
                                    <strong>{{note.owner}}</strong> <span class="text-muted" am-time-ago="note.date">commented 5 days ago</span>
                                </div>
                                <div class="panel-body">
                                    {{note.text}}
                                </div><!-- /panel-body -->
                            </div><!-- /panel panel-default -->
                            <form class="form">
                                <div class="form-group">
                                    <label for="note-{{$index}}">Commentaires</label>
                                    <textarea class="form-control comment-textarea" id="note-{{$index}}" ng-model="note.text" >
                        </textarea>
                                </div>
                                <button type="submit" class="btn btn-default" ng-click="vm.addNote(envie, note)">Commenter</button>
                            </form>
                        </div>
                    </div>

                    <hr>
                    <p></p>

                    <button type="button" class="btn btn-warning edit-button" ng-if="main.user.email == vm.email" ng-click="vm.editEnvie(envie)">Modifier</button>
                    <!--<p></p><br>
                    <p><span class="label label-success">Tecnologia</span><span class="label label-warning">Programação</span><span class="label label-danger">Python</span><span class="label label-info">Dinâmica</span></p>-->
                </div>
            </div>

        </div>
        <!--<div id="envie{{envie.id}}" class="list-group-item" ng-repeat="envie in vm.listeEnvies" ng-class="{'list-group-item-success':envie.userTake}">
            <span class="badge">{{envie.price}}</span>
            <h3 class="list-group-item-heading">{{envie.label}}</h3>
            <br/>
            <p class="list-group-item-text">{{envie.comment}}</p>
            <a ng-href="{{envie.url}}" ng-if="envie.url" target="_blank">Plus d'informations</a>
            <br/>
            <h6 ng-if="main.user.email != vm.email && envie.userTake">Offert par {{envie.userTakeUser.name || envie.userTake}}
                <button type="button" class="btn btn-danger" ng-if="envie.userTakeUser.email == main.user.email" ng-click="vm.cancel(envie.id)">Annuler</button>
            </h6>
            <button type="button" class="btn btn-success" ng-if="main.user.email != vm.email && !envie.userTake" ng-click="vm.given(envie.id)">Offrir</button>
            <br/>


        </div>-->
    </div>

    <form ng-if="main.user.email == vm.email" id="formEdit">
        <div class="form-group">
            <label for="exampleInputEmail1">Titre</label>
            <input type="text" class="form-control" id="exampleInputEmail1" ng-model="vm.envie.label">
        </div>
        <div class="form-group">
            <label for="comment">Description</label>
            <textarea class="form-control"  id="comment" ng-model="vm.envie.comment" >
            </textarea>
        </div>
        <div class="form-group">
            <label for="url">Url</label>
            <input type="url" class="form-control" id="url" ng-model="vm.envie.url" placeholder="http://">
        </div>
        <div class="form-group">
            <label for="price">Prix</label>
            <input type="text" class="form-control" id="price" ng-model="vm.envie.price" placeholder=" € ">
        </div>
        <button type="submit" class="btn btn-default" ng-click="vm.addEnvie(vm.envie)">{{vm.envie.id ? 'Modifier' : 'Ajouter'}}</button>
    </form>

</div>